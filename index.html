<html>
    <head>
        <title>TVDinnr: civilized conversation</title>
        <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.5.1/jquery.min.js"></script> 
        <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.10/jquery-ui.min.js"></script> 
        <script src="http://connect.facebook.net/en_US/all.js#appId=213072778706255&amp;xfbml=1"></script>
        <script type="text/javascript">
            var videoid_from_url = function() {
                return document.location.href.split('#', 2)[1];
            }

            var url_for_video = function(videoid) {
                var root = document.location.href.split('#', 2)[0];
                return root + '#' + videoid
            }

            var widget_width = '640';

            var facebook_code = function(url) {
                var html = '<div id="fb-root"></div><fb:comments href="' + url + '" num_posts="10" width="' + widget_width + '"></fb:comments>';
                return html;
            }

            var player_code = function(videoid) {
                var html = '<iframe id="player" type="text/html" width="' + widget_width + '" height="390" src="http://www.youtube.com/embed/' + videoid + '?enablejsapi=1&origin=tvdinnr.com" frameborder="0">'
                return html;
            }

        </script>

	<link rel="stylesheet" href="style.css" type="text/css" media="screen" />

    </head>
    <body>
        <div id="content">
        </div>
        <script type="text/javascript">
            $(document).ready(function() {
                //# onload
                var videoid = videoid_from_url();
                if(!videoid) {
                    /* default page */
                    videoid = 'NnSxOfYatg8';
                    window.location = '/#' + videoid;
                }
                $('#content').append(player_code(videoid));
                $('#content').append(facebook_code(url_for_video(videoid)));
            });
        </script>

    </body>
</html>
